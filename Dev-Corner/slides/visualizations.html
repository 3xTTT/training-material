<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Visualizations in Galaxy</title>

		<link rel="stylesheet" href="../../assets/reveal.js/css/reveal.css">
		<link rel="stylesheet" href="../../assets/reveal.js/css/theme/simple.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="../../assets/reveal.js/lib/css/zenburn.css">
        <link rel="stylesheet" href="../../assets/css/font-awesome.css">
		<link rel="stylesheet" href="../../shared/css/custom.css" id="theme">

		<!-- Printing and PDF exports -->
        <script>
          if( window.location.search.match( /print-pdf/gi ) ) {
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = '../../assets/reveal.js/css/print/pdf.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
          }
        </script>
		<!--<script>
            if (window.location.search.match(/print-pdf/gi)) {
                document.write('<link rel="stylesheet" href="css/pdf.css" type="text/css">');
            }
        </script>-->

		<!--[if lt IE 9]>
        <script src="../../assets/reveal.js/lib/js/html5shiv.js"></script>
        <![endif]-->
	</head>

	<body>
		<div class="reveal">
            <div class="slides">
                <section data-markdown>
                    <script type="text/template">
                        ## Welcome!

                        <img src="../../shared/images/GTNLogo1000.png" alt="GTNLogo1000"
                        class="no-border" width=30%/>

                        The easiest way to **navigate** this slide deck
                        is **by hitting `[space]` on your keyboard**

                        You can also navigate with arrow keys, but be careful because some
                        slides can be nested inside of each other (vertically)
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        # Visualizations in Galaxy
                    </script>
                </section>

                <section>
                    <section data-markdown>
                        <script type="text/template">
                            ## Why visualizations?
                            
                            - Anscombe's Quartet
                            
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Anscombe.svg/650px-Anscombe.svg.png" class="no-border" width="45%"/>
                            
                                mean x: 9, var x: 11, mean y: 7.5,
                                var y: ~-4.125, corr 0.816, lr: y=0.5x + 3
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Why visualizations?
                            
                            <img src="../images/vis_alignment_plaintext.png" class="no-border" width="70%"/>
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Why visualizations?
                            
                            <img src="../images/vis_alignment.png" class="no-border" width="99%"/>
                        </script>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <script type="text/template">
                            ### <i class="fa fa-exclamation-circle" aria-hidden="true"></i> Types of visualization in Galaxy

                            - As Galaxy tool (wrapper)
                            - As 3rd party app (./display_applications)
                            - Trackster
                            - Interactive environment
                            - As visualization <i> plugin</i>

                            <aside class="notes">
                                Examples:
                                 - as tool: iReport, jBrowse
                                 - as 3rd party app: IGV, UCSC
                            </aside>
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ### Pro's and con's

                            <table>
                                <tr><td>Type</td>        <td>i_active</td>   <td>Workflow</td>   <td>Shed</td>  <td>tweakable<td>  <td>serv_idx<td></tr>
                                <tr><td>Tool</td>        <td>-</td>          <td>+</td>          <td>+</td>     <td>+<td>          <td>-<td></tr>
                                <tr><td>3rd party</td>   <td>+</td>          <td>-</td>          <td>-</td>     <td>-<td>          <td>+<td></tr>
                                <tr><td>trackster</td>   <td>+</td>          <td>-</td>          <td>-</td>     <td>-<td>          <td>+<td></tr>
                                <tr><td>i-env</td>       <td>+</td>          <td>-</td>          <td>-</td>     <td>+<td>          <td>-<td></tr>
                                <tr><td>v-plugin</td>    <td>+</td>          <td>-</td>          <td>-</td>     <td>+<td>          <td>-<td></tr>
                            </table>
                            
                            *shed: installable via tool shed = functional tests, dependency management and versioning
                            <aside class="notes">
                                Tools have some great advantages over all other tools, simply because they integrate so well with the Galaxy ecosystem.
                                Therefore several visualizations have been implemented as such a tools.
                                However, there are some boundaries to Galaxy that limit such vizualization.
                                For example, interactive tools require HTML which is for security reasons disabled in Galaxy.
                                Because these visualizations work client-side and within a browser, it is hard to make use of served side indexing.
                                As consequence, large data files (BAM) are transported entirely before being visualized.
                                
                                The visualisation plugin system was originally developed to solve most of these issues.
                            </aside>
                        </script>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <script type="text/template">
                            ### Galaxy visualization plugins
                            
                            - Plugin development directory:
                                  $GALAXY_ROOT/config/plugins
                            - Example (in mainline)
                                * Charts
                            
                            <img src="../images/vis_plugin_menu.png" class="no-border" width="55%"/>
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ### Write first plugin
                            
                            - Elements of visualization plugin:
                                * configured Datatype: e.g. BAM
                                * description: name, version, description, license
                                * HTML + js (template): variables will be replaced (e.g. resolved data file url)
                            - Assignment: Boxplot of chromosome contents in BAM file
                                * Data is present as Metadata
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ### Write first plugin
                            
                            - For XML file hooking visualization into galaxy:
                                  mkdir -p $GALAXY_ROOT/config/plugins/$PLUGIN_NAME/config ;
                            - For templates of HTML files:
                                  mkdir -p $GALAXY_ROOT/config/plugins/$PLUGIN_NAME/templates
                            - For files that need to be exposed via the webserver (static images, compiled JS files)
                                  mkdir -p $GALAXY_ROOT/config/plugins/$PLUGIN_NAME/static
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ### Write first plugin:  hooking visualization into galaxy
                                  $GALAXY_ROOT/config/plugins/$PLUGIN_NAME/config/$PLUGIN_NAME.xml ;
                            <img src="../images/vis_plugin_conf_xml.png" class="no-border" width="75%"/>
                            * Data types must match with class names in
                                   $GALAXY_ROOT/lib/galaxy/datatypes/
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ### Write first plugin: *alignment_rname_boxplot*
                            
                            - For templates of HTML files:
                                  touch $GALAXY_ROOT/config/plugins/$PLUGIN_NAME/templates/$PLUGIN_NAME.mako ;
                                * Link to data types and HTML template file
                            <img src="../images/vis_plugin_conf_xml.png" class="no-border" width="75%"/>
                        </script>
                    </section>
                </section>


                <section data-markdown>
                    <script type="text/template">
                        ### <i class="fa fa-exclamation-circle" aria-hidden="true"></i> Key points

                        - Simple sentence to sum up the first key point of the tutorial (Take home message)
                        - Second key point
                        - Third key point
                        - ...
                    </script>
                </section>
			</div>

		</div>

		<script type="text/javascript" src="../../assets/reveal.js/lib/js/head.min.js"></script>
        <script type="text/javascript" src="../../assets/reveal.js/js/reveal.js"></script>
        <script type="text/javascript">
            Reveal.initialize({
                slideNumber: !window.location.search.match(/print-pdf/gi),
                history: true,

                theme: Reveal.getQueryHash().theme,
                transition: Reveal.getQueryHash().transition || 'concave',

                dependencies: [
                    { src: '../../assets/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: '../../assets/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../../assets/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../../shared/js/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: '../../assets/reveal.js/plugin/notes/notes.js', async: true },
                ]
            });
        </script>

	</body>
</html>
